<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />

    <title>Wquzxw</title>
 
  <script src="victor.min.js"></script>
  <script>
    var cv;
    var cntx;
    var t = 0.0;
    
    var bodies_pos = [new Victor(320, 240), new Victor(160, 120)];
    var bodies_vol = [new Victor(1,0), new Victor(0,0)];
    var bodies_mass = [1000000, 1000000];
    function init() {
      cv = document.getElementById('cv');
      cntx = cv.getContext('2d');
      var a = new Victor(0, 0);
      
      setInterval(loop, 16);
    }
    
    function update() {
      for(var i = 0; i < bodies_pos.length; ++i) {
        var Ag = new Victor(0,0);
        for(var j = 0; j < bodies_pos.length; ++j) {
          if(i == j) continue;
          // Ag = (m2)/r^2
          var d = new Victor(bodies_pos[j].x - bodies_pos[i].x, bodies_pos[j].y-bodies_pos[i].y)
          var r2 = d.lengthSq();
          d = d.norm();
          var Ags = bodies_mass[j] / r2;
          Ag.add(new Victor(6.674e-11*Ags*d.x, 6.674e-11*Ags*d.y));
        }
        bodies_vol[i] += Ag;
        bodies_pos[i] += bodies_vol[i];
      }
    }
    
    function render() {
      cntx.fillStyle = 'green';
      for(var i = 0; i < bodies_pos.length; ++i) {
        var bpos = bodies_pos[i];
        cntx.beginPath();
        cntx.arc(bpos.x, bpos.y, 16, 0, Math.PI*2, true);
        cntx.closePath();
        cntx.fill();
      }
    }
    
    function loop() {
      t += 0.016;
      update();
      cntx.clearRect(0, 0, 640, 480);
      render();
    }
    
  </script>
  </head>

  <body onload="init()" style="background: black">
   <h1>Wquzxw</h1>
   <canvas id="cv" width="640" height="480" style="background: black"></canvas>    

  </body>
</html>
